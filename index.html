<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simple Temp Mail Inbox</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 700px;
    margin: 30px auto;
    background: #f9f9f9;
    padding: 20px;
    text-align: center;
  }
  #email {
    font-weight: bold;
    color: #2a9d8f;
    font-size: 1.2em;
    margin-bottom: 15px;
  }
  button {
    background: #264653;
    color: white;
    border: none;
    padding: 10px 18px;
    cursor: pointer;
    font-size: 1em;
    border-radius: 5px;
    margin-bottom: 20px;
  }
  button:hover {
    background: #1b3a4b;
  }
  #inbox {
    text-align: left;
  }
  .message {
    background: white;
    border-radius: 8px;
    padding: 12px 15px;
    margin-bottom: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    word-wrap: break-word;
  }
  .message b {
    color: #264653;
  }
  pre {
    background: #e9ecef;
    padding: 10px;
    border-radius: 5px;
    white-space: pre-wrap;
    margin-top: 8px;
  }
</style>
</head>
<body>
  <h1>üì® Your Temp Mail Inbox</h1>
  <div>Your temporary email address is:</div>
  <div id="email">Loading...</div>
  <button onclick="copyEmail()">üìã Copy Email</button>
  <button onclick="refreshInbox()">üîÑ Refresh Inbox</button>

  <h2>Inbox</h2>
  <div id="inbox">Loading inbox...</div>

<script>
  // Generate random username and domain
  const domains = ["1secmail.com", "1secmail.org", "1secmail.net"];
  const username = Math.random().toString(36).substring(2, 10);
  const domain = domains[Math.floor(Math.random() * domains.length)];
  const emailAddress = `${username}@${domain}`;

  // Display email address
  const emailElem = document.getElementById("email");
  emailElem.textContent = emailAddress;

  // Copy email to clipboard
  function copyEmail() {
    navigator.clipboard.writeText(emailAddress).then(() => {
      alert("Copied email: " + emailAddress);
    });
  }

  // Fetch inbox messages
  async function refreshInbox() {
    const inboxElem = document.getElementById("inbox");
    inboxElem.textContent = "Loading inbox...";

    try {
      const res = await fetch(`https://www.1secmail.com/api/v1/?action=getMessages&login=${username}&domain=${domain}`);
      const messages = await res.json();

      if (!messages.length) {
        inboxElem.textContent = "üì≠ No messages yet. Send mail to your temp address!";
        return;
      }

      inboxElem.innerHTML = "";

      for (const msg of messages) {
        const msgRes = await fetch(`https://www.1secmail.com/api/v1/?action=readMessage&login=${username}&domain=${domain}&id=${msg.id}`);
        const fullMsg = await msgRes.json();

        inboxElem.innerHTML += `
          <div class="message">
            <div><b>From:</b> ${fullMsg.from}</div>
            <div><b>Subject:</b> ${fullMsg.subject}</div>
            <pre>${fullMsg.textBody || fullMsg.htmlBody || "No content"}</pre>
          </div>`;
      }
    } catch (e) {
      inboxElem.textContent = "‚ö†Ô∏è Failed to load inbox.";
      console.error(e);
    }
  }

  // Load inbox on page load
  window.onload = refreshInbox;
</script>
</body>
</html>
